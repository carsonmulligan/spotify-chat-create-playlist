<!-- public/landing.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TuneSmith - AI-Powered Spotify Playlist Creator</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>TuneSmith ðŸŽµ</h1>
            <nav>
                <a href="#signup" class="button">Sign Up</a>
                <a href="#subscribe" class="button">Subscribe</a>
            </nav>
        </header>

        <main>
            <section class="hero">
                <h2>AI-Powered Spotify Playlist Creator ðŸ¤–ðŸŽ§</h2>
                <p>Create the perfect playlist with just a few words! âœ¨</p>
            </section>

            <section class="demo">
                <h3>See TuneSmith in Action ðŸŽ¬</h3>
                <video width="100%" controls>
                    <source src="/tunesmith_product_demo.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </section>

            <section class="features">
                <h3>Features ðŸš€</h3>
                <ul>
                    <li>ðŸ§  AI-powered playlist generation</li>
                    <li>ðŸŽµ Seamless Spotify integration</li>
                    <li>ðŸŽ¨ Customizable playlists</li>
                    <li>âš¡ Quick and easy to use</li>
                </ul>
            </section>

            <section id="signup" class="signup">
                <h3>Sign Up for Updates ðŸ“¬</h3>
                <form id="signup-form">
                    <input type="email" name="email" placeholder="Your email" required>
                    <button type="submit">Sign Up</button>
                </form>
            </section>

            <section id="subscribe" class="subscribe">
                <h3>Subscribe for Unlimited Playlists ðŸŽ‰</h3>
                <button id="subscribe-button">Subscribe Now</button>
            </section>

            <section class="cta">
                <h3>Ready to Create Your Perfect Playlist? ðŸŽµ</h3>
                <a href="/login" class="button">Get Started with Spotify</a>
            </section>
        </main>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <script>
        let stripe;

        fetch('/config')
            .then((response) => response.json())
            .then((data) => {
                stripe = Stripe(data.publishableKey);
            });

        document.getElementById('signup-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = e.target.email.value;
            fetch('/signup', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Thanks for signing up! We\'ll keep you updated.');
                } else {
                    alert('Sign up failed: ' + data.error);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });

        document.getElementById('subscribe-button').addEventListener('click', function() {
            fetch('/create-checkout-session', {
                method: 'POST',
            })
            .then(response => response.json())
            .then(session => {
                return stripe.redirectToCheckout({ sessionId: session.id });
            })
            .then(result => {
                if (result.error) {
                    alert(result.error.message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
